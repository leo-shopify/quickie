<!DOCTYPE html>
<html>
  <head>
    <title>Quickie</title>
    <meta charset="utf-8">
    <style>
      html {
          color: #ccc;
          background-color: #333;
          font: 16px/24px Tahoma, sasns-serif;
      }
      body {
          margin: 0;
          padding: 6px;
      }
      fieldset {
          border: 0;
          padding: 0;
      }

      nav {
          margin-bottom: 12px;
      }
      #Search > input {
          color: #ccc;
          background-color: #333;
          font: 16px/24px Tahoma, sasns-serif;
          border: 0;
          border-bottom: 2px solid #777;
          border-radius: 2px;
          padding: 0 6px 6px 12px;
          width: 100%;
      }
      #Search > input:focus {
          outline: 0 none;
          border-bottom-color: #ccc;
      }
      nav > .tags {
          grid-column: 1/-1;
      }
      @media(min-width: 615px) { /* 6(mar) + 300(col) + 3(gap) + 300(col) + 6(mar) */
          nav > .tags {
              grid-column: 2/-1;
          }
      }
      nav > .tags > a {
          text-decoration: none;
          font-size: 14px;
          margin-left: 12px;
          padding-bottom: 6px;
          border-bottom-width: 2px;
          border-bottom-style: solid;
          border-radius: 2px;
          color: #ccc;
      }

      nav,
      main {
          display: grid;
          grid-gap: 6px;
          grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      }

      main {
          grid-auto-rows: 36px;
      }
      main > a {
          text-decoration: none;
          color: #ccc;
          background-color: #222;
          border-right-width: 6px;
          border-right-style: solid;
          border-radius: 6px;
          padding-left: 12px;
          display: flex;
          align-items: center;
      }
      main > a:visited {
          color: #ccc;
      }
      main > a:focus,
      main > a:hover {
          background-color: #111;
      }
      main > a:focus,
      main > a:target {
          outline: 0 none;
          border-top-width: 1px;
          border-bottom-width: 1px;
          border-left-width: 1px;
          border-style: solid;
      }

      .identity { border-color: #844; }
      .amazon { border-color: #684; }
      .github { border-color: #468; }
      .app { border-color: #874; }
      .guide { border-color: #758; }
      .vault { border-color: #488; }
      .other { border-color: #777; }
    </style>
  </head>
  <body>
    <nav>
      <form id="Search">
        <input type="search" list="Links" placeholder="Search">
        <datalist id="Links"></datalist>
      </form>

      <div class="tags"></div>
    </nav>

    <main></main>

    <script>
      function makeLink(desc, href, group, index) {
        const link = document.createElement('a');
        link.textContent = desc;
        link.href = href;
        link.name = group;
        link.className = group;
        link.tabIndex = index;
        return link;
      }

      function makeOption(desc) {
        const option = document.createElement('option');
        option.value = desc;
        return option;
      }

      function makeOnSubmit(searchField, linkIndex) {
        return function onSubmit(evt) {
          const href = linkIndex.get(searchField.value);
          if (href) window.location.href = href;
          evt.preventDefault();
        };
      }

      function clearAndFocus(elm) {
        elm.value = '';
        elm.focus();
      }

      function makeOnKeyUp(search) {
        return function onKeyUp(evt) {
          if (evt.key === 'Escape') clearAndFocus(search);
        }
      }

      function makeOnBodyClick(search) {
        return function onBodyClick(evt) {
          clearAndFocus(search);
        }
      }

      function makeTag(group) {
        const tag = document.createElement('a');
        tag.textContent = group;
        tag.href = '#' + group;
        tag.className = group;
        return tag;
      }

      function start(db) {
        const groups = [];
        const linkIndex = new Map();
        const linksRoot = document.querySelector('main');
        const dlistRoot = document.querySelector('#Links');
        const tabIndex1 = 1;

        db.forEach((it, i) => {
          const [group, desc, href] = it;

          if (!groups.includes(group)) groups.push(group);

          linkIndex.set(desc, href);

          const link = makeLink(desc, href, group, i + tabIndex1);
          linksRoot.appendChild(link);

          const option = makeOption(desc);
          dlistRoot.appendChild(option);
        });

        const searchForm = document.querySelector('#Search');
        const searchField = searchForm.querySelector('input');
        searchForm.onsubmit = makeOnSubmit(searchField, linkIndex);
        searchField.tabIndex = tabIndex1;

        const onKeyUp = makeOnKeyUp(searchField);
        searchField.onkeyup = onKeyUp;
        document.onkeyup = onKeyUp;
        document.onclick = makeOnBodyClick(searchField);

        const tags = document.querySelector('nav > .tags');
        groups.forEach(it => {
          const tag = makeTag(it);
          tags.appendChild(tag);
        });

      }

      start([
        ['identity', 'Github identity repo', 'https://github.com/Shopify/identity'],
        ['identity', 'Github identity projects', 'https://github.com/Shopify/identity/projects/'],
        ['identity', 'Github identity milestone ux', 'https://github.com/Shopify/identity/milestone/9'],
        ['identity', 'Bugsnag identity js', 'https://app.bugsnag.com/shopify/identity-javascript/'],
        ['identity', 'Identity dashboard prod', 'https://accounts.shopify.com/services/dashboard'],
        ['identity', 'Identity prod', 'https://accounts.shopify.com/'],

        ['amazon', 'Github Amazon repo', 'https://github.com/Shopify/sell-on-amazon'],
        ['amazon', 'Github Amazon issues', 'https://github.com/Shopify/sell-on-amazon/issues?q=is%3Aopen+assignee%3Aleo-shopify'],
        ['amazon', 'Bugsnag Amazon js', 'https://app.bugsnag.com/shopify/sell-on-amazon-js/'],
        ['amazon', 'Waffle Amazon', 'https://waffle.io/Shopify/sell-on-amazon'],
        ['amazon', 'Amazon dev', 'https://marki-test.myshopify.com/admin/apps/amazon-dev/'],

        ['github', 'Octobox', 'https://octobox.shopify.io/'],
        ['github', 'Github leo', 'https://github.com/leo-shopify?tab=repositories'],
        ['github', 'Github Shopify', 'https://github.com/Shopify'],

        ['app', 'Slack', 'https://shopify.slack.com/'],
        ['app', 'Circle CI', 'https://circleci.com/gh/Shopify/'],
        ['app', 'Shippit', 'https://shipit.shopify.io/'],
        ['app', 'Okta', 'https://shopify.okta.com/app/UserHome'],
        ['app', 'Google mail', 'https://mail.google.com/mail/'],
        ['app', 'Google calendar', 'https://calendar.google.com/calendar/'],
        ['app', 'Google drive', 'https://drive.google.com/drive/'],
        ['app', 'Google meet', 'https://meet.google.com/'],

        ['guide', 'Devdocs', 'http://devdocs.io/'],
        ['guide', 'Admin style guide', 'http://styleguide.myshopify.com/'],
        ['guide', 'Marketing style guide', 'http://ux.shopify.io/'],
        ['guide', 'Polaris style guide', 'https://polaris.shopify.com/'],
        ['guide', 'Grid by example', 'https://gridbyexample.com/examples/'],

        ['vault', 'Vault unicorn', 'https://unicorn.shopify.com/'],
        ['vault', 'Vault employees', 'http://unicorn.shopify.com/employees'],
        ['vault', 'Vault teams', 'https://unicorn.shopify.com/teams'],
        ['vault', 'Vault projects', 'https://unicorn.shopify.com/projects'],
        ['vault', 'Vault data portal', 'https://data.shopify.com/'],
        ['vault', 'Vault departments', 'https://vault.shopify.com/Departments'],

        ['other', 'Org mode manual', 'http://orgmode.org/manual/'],
        ['other', 'Racket', 'http://racket-lang.org/'],
        ['other', 'Hacker news', 'https://news.ycombinator.com/'],
        ['other', 'Reddir', 'https://reddit.com/'],
        ['other', 'Toronto Public Library', 'http://www.torontopubliclibrary.ca/search.jsp?Ntt=safari'],
        ['other', 'Spotify', 'https://play.spotify.com/'],
      ]);
    </script>
  </body>
</html>